---
title: Automatisch maken van facturen configureren - lite
description: Dit onderwerp bevat informatie over het configureren van het automatisch maken van pro-formafacturen.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 1d911ab0defaaee40d8752557e1115ea49c8fa93
ms.sourcegitcommit: fa32b1893286f20271fa4ec4be8fc68bd135f53c
ms.translationtype: HT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/15/2021
ms.locfileid: "5274317"
---
# <a name="configure-automatic-invoice-creation---lite"></a><span data-ttu-id="627e7-103">Automatisch maken van facturen configureren - lite</span><span class="sxs-lookup"><span data-stu-id="627e7-103">Configure automatic invoice creation - lite</span></span>
 
<span data-ttu-id="627e7-104">_**Van toepassing op:** Lite-implementatie - van deal tot pro-formafacturering_</span><span class="sxs-lookup"><span data-stu-id="627e7-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="627e7-105">U kunt het automatisch maken van facturen configureren in Dynamics 365 Project Operations.</span><span class="sxs-lookup"><span data-stu-id="627e7-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="627e7-106">Er wordt een concept van de pro-formafactuur gemaakt op basis van het factuurschema voor elk projectcontract en elke contractregel.</span><span class="sxs-lookup"><span data-stu-id="627e7-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="627e7-107">Factuurschema´s worden op contractregelniveau geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="627e7-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="627e7-108">Elke regel in een contract kan een afzonderlijk factuurschema hebben of hetzelfde factuurschema kan op elke regel van het contract worden opgenomen.</span><span class="sxs-lookup"><span data-stu-id="627e7-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="627e7-109">Als u een factuur maakt, wordt altijd ten minste één factuur per projectcontract gemaakt.</span><span class="sxs-lookup"><span data-stu-id="627e7-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="627e7-110">In sommige gevallen kunnen er meerdere facturen worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="627e7-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="627e7-111">Als het contract bijvoorbeeld meerdere klanten heeft, wordt hetzelfde aantal facturen gemaakt als het aantal klanten dat factureerbare transacties heeft die moeten worden gefactureerd voor dat projectcontract.</span><span class="sxs-lookup"><span data-stu-id="627e7-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="627e7-112">Hoe transacties worden opgenomen in een factuur</span><span class="sxs-lookup"><span data-stu-id="627e7-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="627e7-113">Soms wordt met elke projectgebaseerde contractregel een apart factuurschema opgegeven.</span><span class="sxs-lookup"><span data-stu-id="627e7-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="627e7-114">Implementatieservices voor het Adatum-contract hebben bijvoorbeeld de volgende contractregels:</span><span class="sxs-lookup"><span data-stu-id="627e7-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="627e7-115">Prototypewerk dat een vaste prijs heeft met twee handmatig gemaakte mijlpalen.</span><span class="sxs-lookup"><span data-stu-id="627e7-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="627e7-116">Implementatiewerk dat Tijd bevat en twee keer per week op maandag wordt gefactureerd.</span><span class="sxs-lookup"><span data-stu-id="627e7-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="627e7-117">Gemaakte onkosten die maandelijks, op de eerste maandag van elke maand, moeten worden gefactureerd.</span><span class="sxs-lookup"><span data-stu-id="627e7-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="627e7-118">Factuurschema's die voor elk van deze twee regelitems zijn gedefinieerd, zien eruit als de volgende tabel:</span><span class="sxs-lookup"><span data-stu-id="627e7-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="627e7-119">Contractregel</span><span class="sxs-lookup"><span data-stu-id="627e7-119">Contract line</span></span> | <span data-ttu-id="627e7-120">Uitvoeringsdatum van facturen</span><span class="sxs-lookup"><span data-stu-id="627e7-120">Invoice run date</span></span> | <span data-ttu-id="627e7-121">Uiterste datum voor transactie</span><span class="sxs-lookup"><span data-stu-id="627e7-121">Transaction cut-off date</span></span> | <span data-ttu-id="627e7-122">Datum van mijlpaal</span><span class="sxs-lookup"><span data-stu-id="627e7-122">Milestone date</span></span> | <span data-ttu-id="627e7-123">Bedrag van mijlpaal</span><span class="sxs-lookup"><span data-stu-id="627e7-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="627e7-124">Prototypewerk</span><span class="sxs-lookup"><span data-stu-id="627e7-124">Prototype work</span></span> | <span data-ttu-id="627e7-125">5 oktober, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-125">October 5, Monday</span></span> | - | <span data-ttu-id="627e7-126">5 oktober, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-126">October 5, Monday</span></span> | <span data-ttu-id="627e7-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="627e7-127">5000 USD</span></span> |
| - | <span data-ttu-id="627e7-128">3 november, dinsdag</span><span class="sxs-lookup"><span data-stu-id="627e7-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="627e7-129">3 november, dinsdag</span><span class="sxs-lookup"><span data-stu-id="627e7-129">November 3, Tuesday</span></span> | <span data-ttu-id="627e7-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="627e7-130">12,000 USD</span></span> |
| <span data-ttu-id="627e7-131">Implementatiewerk</span><span class="sxs-lookup"><span data-stu-id="627e7-131">Implementation work</span></span> | <span data-ttu-id="627e7-132">5 oktober, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-132">October 5, Monday</span></span> | <span data-ttu-id="627e7-133">4 oktober, zondag</span><span class="sxs-lookup"><span data-stu-id="627e7-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="627e7-134">19 oktober, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-134">October 19, Monday</span></span> | <span data-ttu-id="627e7-135">18 oktober, zondag</span><span class="sxs-lookup"><span data-stu-id="627e7-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="627e7-136">2 november, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-136">November 2, Monday</span></span> | <span data-ttu-id="627e7-137">1 november, zondag</span><span class="sxs-lookup"><span data-stu-id="627e7-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="627e7-138">16 november, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-138">November 16, Monday</span></span> | <span data-ttu-id="627e7-139">15 november, zondag</span><span class="sxs-lookup"><span data-stu-id="627e7-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="627e7-140">Gemaakte onkosten</span><span class="sxs-lookup"><span data-stu-id="627e7-140">Expenses incurred</span></span> | <span data-ttu-id="627e7-141">5 oktober, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-141">October 5, Monday</span></span> | <span data-ttu-id="627e7-142">4 oktober, zondag</span><span class="sxs-lookup"><span data-stu-id="627e7-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="627e7-143">2 november, maandag</span><span class="sxs-lookup"><span data-stu-id="627e7-143">November 2, Monday</span></span> | <span data-ttu-id="627e7-144">1 november, zondag</span><span class="sxs-lookup"><span data-stu-id="627e7-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="627e7-145">In dit voorbeeld wanneer de automatische facturering wordt uitgevoerd op:</span><span class="sxs-lookup"><span data-stu-id="627e7-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="627e7-146">**4 oktober of een eerdere datum**: er wordt geen factuur gegenereerd voor dit contract omdat de tabel **Factuurschema** voor elk van deze contractregels 4 oktober, zondag niet noemt als uitvoeringsdatum voor facturen.</span><span class="sxs-lookup"><span data-stu-id="627e7-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="627e7-147">**5 oktober, maandag**: er wordt één factuur gegenereerd voor:</span><span class="sxs-lookup"><span data-stu-id="627e7-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="627e7-148">Prototypewerk dat de mijlpaal bevat, als deze is gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="627e7-149">Implementatiewerk dat alle tijdtransacties omvat die zijn gemaakt vóór de afsluitdatum van de transactie van 4 oktober, zondag, dat is gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="627e7-150">Gemaakte onkosten waarin alle onkostentransacties zijn opgenomen die zijn gemaakt vóór de afsluitdatum van de transactie van 4 oktober, zondag, die zijn gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="627e7-151">**Op 6 oktober of een eerdere datum vóór 19 oktober**: er wordt geen factuur gegenereerd voor dit contract omdat de tabel **Factuurschema** voor elk van deze contractregels 6 oktober of een datum vóór 19 oktober niet noemt als uitvoeringsdatum voor facturen.</span><span class="sxs-lookup"><span data-stu-id="627e7-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="627e7-152">**19 oktober, maandag**: er wordt één factuur gegenereerd voor implementatiewerk dat alle tijdtransacties omvat die zijn gemaakt vóór de afsluitdatum van de transactie van 18 oktober, zondag, dat is gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="627e7-153">**2 november, maandag**: er wordt één factuur gegenereerd voor:</span><span class="sxs-lookup"><span data-stu-id="627e7-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="627e7-154">Implementatiewerk dat alle tijdtransacties omvat die zijn gemaakt vóór de afsluitdatum van de transactie van 1 november, zondag, dat is gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="627e7-155">Gemaakte onkosten waarin alle onkostentransacties zijn opgenomen die zijn gemaakt vóór de afsluitdatum van de transactie van 1 november, zondag, die zijn gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="627e7-156">**3 november, dinsdag** : er wordt één factuur gegenereerd voor prototypewerk met de mijlpaal voor 12000 USD, als dit is gemarkeerd als **Gereed voor facturering**.</span><span class="sxs-lookup"><span data-stu-id="627e7-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="627e7-157">Automatische facturering configureren</span><span class="sxs-lookup"><span data-stu-id="627e7-157">Configure automatic invoicing</span></span>

<span data-ttu-id="627e7-158">Voer de volgende stappen uit om een geautomatiseerde factuuruitvoering te configureren.</span><span class="sxs-lookup"><span data-stu-id="627e7-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="627e7-159">Ga in **Project Operations** naar **Instellingen** > **Instellingen voor terugkerende facturen**.</span><span class="sxs-lookup"><span data-stu-id="627e7-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="627e7-160">Maak een batchtaak en noem deze taak **Facturen maken met Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="627e7-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="627e7-161">De naam van de batchtaak moet de woorden 'facturen maken' bevatten.</span><span class="sxs-lookup"><span data-stu-id="627e7-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="627e7-162">Selecteer in het veld **Taaktype** de optie **Geen**.</span><span class="sxs-lookup"><span data-stu-id="627e7-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="627e7-163">Standaard zijn de velden **Dagelijkse frequentie** en **Is actief** ingesteld op **Ja**.</span><span class="sxs-lookup"><span data-stu-id="627e7-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="627e7-164">Selecteer **Werkstroom uitvoeren**.</span><span class="sxs-lookup"><span data-stu-id="627e7-164">Select **Run Workflow**.</span></span> <span data-ttu-id="627e7-165">In het dialoogvenster **Record opzoeken** ziet u drie werkstromen:</span><span class="sxs-lookup"><span data-stu-id="627e7-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="627e7-166">Aanroeper procesuitvoering</span><span class="sxs-lookup"><span data-stu-id="627e7-166">ProcessRunCaller</span></span>
- <span data-ttu-id="627e7-167">Proces uitvoeren</span><span class="sxs-lookup"><span data-stu-id="627e7-167">ProcessRunner</span></span>
- <span data-ttu-id="627e7-168">Rolgebruik bijwerken</span><span class="sxs-lookup"><span data-stu-id="627e7-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="627e7-169">Selecteer **Aanroeper procesuitvoering** en selecteer vervolgens **Toevoegen**.</span><span class="sxs-lookup"><span data-stu-id="627e7-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="627e7-170">Selecteer in het volgende dialoogvenster de optie **OK**.</span><span class="sxs-lookup"><span data-stu-id="627e7-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="627e7-171">Een **slaapstandwerkstroom** wordt gevolgd door een **proceswerkstroom**.</span><span class="sxs-lookup"><span data-stu-id="627e7-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="627e7-172">U kunt ook **Proces uitvoeren** selecteren in stap 5.</span><span class="sxs-lookup"><span data-stu-id="627e7-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="627e7-173">Wanneer u vervolgens **OK** selecteert, wordt een **proceswerkstroom** gevolgd door een **slaapstandwerkstroom**.</span><span class="sxs-lookup"><span data-stu-id="627e7-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="627e7-174">Met de werkstromen **Aanroeper procesuitvoering** en **Proces uitvoeren** worden facturen gemaakt.</span><span class="sxs-lookup"><span data-stu-id="627e7-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="627e7-175">**Aanroeper procesuitvoering** roept **Proces uitvoeren** aan.</span><span class="sxs-lookup"><span data-stu-id="627e7-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="627e7-176">**Proces uitvoeren** is de werkstroom waarmee de facturen daadwerkelijk worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="627e7-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="627e7-177">Met de werkstroom worden alle contractregels doorlopen waarvoor facturen moeten worden gemaakt en worden facturen voor die regels gemaakt.</span><span class="sxs-lookup"><span data-stu-id="627e7-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="627e7-178">Voor deze taak wordt gekeken naar de uitvoeringsdatums van facturen voor de contractregels om te bepalen voor welke contractregels facturen moeten worden gemaakt.</span><span class="sxs-lookup"><span data-stu-id="627e7-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="627e7-179">Als contractregels die tot één contract behoren, dezelfde factuur-uitvoeringsdatum hebben, worden de transacties samengevoegd tot één factuur met twee factuurregels.</span><span class="sxs-lookup"><span data-stu-id="627e7-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="627e7-180">Als er geen transacties zijn waarvoor facturen kunnen worden gemaakt, wordt bij de taak het maken van de factuur overgeslagen.</span><span class="sxs-lookup"><span data-stu-id="627e7-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="627e7-181">Nadat de werkstroom **Proces uitvoeren** is voltooid, roept deze de werkstroom **Aanroeper procesuitvoering** aan, verstrekt deze de eindtijd en wordt deze afgesloten.</span><span class="sxs-lookup"><span data-stu-id="627e7-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="627e7-182">Met **Aanroeper procesuitvoering** wordt vervolgens een timer gestart die voor 24 uur wordt uitgevoerd vanaf de opgegeven eindtijd.</span><span class="sxs-lookup"><span data-stu-id="627e7-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="627e7-183">Als de timer heeft afgeteld tot nul, wordt **Aanroeper procesuitvoering** gesloten.</span><span class="sxs-lookup"><span data-stu-id="627e7-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="627e7-184">De batchprocestaak voor het maken van facturen is een terugkerende taak.</span><span class="sxs-lookup"><span data-stu-id="627e7-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="627e7-185">Als dit batchproces vaak wordt uitgevoerd, worden er meerdere exemplaren van de taak gemaakt en veroorzaakt dit fouten.</span><span class="sxs-lookup"><span data-stu-id="627e7-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="627e7-186">U moet daarom het batchproces slechts één keer starten en het proces vervolgens alleen opnieuw opstarten als het proces niet meer wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="627e7-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="627e7-187">Batchfacturering in Project Operations wordt alleen uitgevoerd voor projectcontractregels die zijn geconfigureerd door factuurschema's.</span><span class="sxs-lookup"><span data-stu-id="627e7-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="627e7-188">Voor een contractregel met een factureringsmethode met een vaste prijs moeten mijlpalen zijn geconfigureerd.</span><span class="sxs-lookup"><span data-stu-id="627e7-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="627e7-189">Voor een projectcontractregel met een factureringsmethode voor tijd en materiaal is een op datum gebaseerd factuurschema nodig.</span><span class="sxs-lookup"><span data-stu-id="627e7-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]